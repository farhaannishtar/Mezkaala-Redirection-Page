<!DOCTYPE html>
<html>
  <head>
    <title>Mezkala</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Poppins&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Montserrat", sans-serif;
      }
    </style>
  </head>

  <body>
    <!-- <p id="message">Redirecting...</p> -->
    <div class="h-screen">
      <div class="flex justify-between items-center py-9 w-full">
        <button
          id="appLink"
          class="flex items-center justify-center relative ml-12"
        >
          <svg
            class="absolute"
            width="68"
            height="68"
            viewBox="0 0 34 34"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect
              x="0.710938"
              y="0.5"
              width="33"
              height="33"
              rx="8"
              fill="url(#paint0_linear_1_115)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_1_115"
                x1="17.2109"
                y1="0.5"
                x2="17.2109"
                y2="33.5"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#C652FF" />
                <stop offset="1" stop-color="#6381FF" />
              </linearGradient>
            </defs>
          </svg>
          <svg
            class="z-10"
            xmlns="http://www.w3.org/2000/svg"
            width="48"
            height="48"
            viewBox="0 0 24 24"
            fill="none"
          >
            <path
              d="M4.54427 6.25006H19.8776V8.16673H4.54427V6.25006ZM4.54427 11.0417H19.8776V12.9584H4.54427V11.0417ZM4.54427 15.8334H19.8776V17.7501H4.54427V15.8334Z"
              fill="#F3F3F3"
            />
          </svg>
        </button>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="278"
          height="68"
          viewBox="0 0 119 24"
          fill="none"
        >
          <path
            d="M14.9026 3.94447C14.9026 2.5849 13.7963 1.47867 12.4368 1.47867C11.0772 1.47867 9.97097 2.5849 9.97097 3.94447C9.97097 5.30403 11.0772 6.41027 12.4368 6.41027C13.7963 6.41027 14.9026 5.30403 14.9026 3.94447ZM10.857 3.94447C10.857 3.07374 11.566 2.36595 12.4368 2.36595C13.3075 2.36595 14.0166 3.07501 14.0166 3.94447C14.0166 4.81393 13.3075 5.52426 12.4368 5.52426C11.566 5.52426 10.857 4.8152 10.857 3.94447Z"
            fill="#F200FF"
          />
          <path
            d="M9.97607 20.0556C9.97607 21.4151 11.0823 22.5213 12.4419 22.5213C13.8014 22.5213 14.9077 21.4151 14.9077 20.0556C14.9077 18.696 13.8014 17.5898 12.4419 17.5898C11.0823 17.5898 9.97607 18.696 9.97607 20.0556ZM14.0217 20.0556C14.0217 20.9263 13.3126 21.6353 12.4419 21.6353C11.5711 21.6353 10.8621 20.9263 10.8621 20.0556C10.8621 19.1848 11.5711 18.4758 12.4419 18.4758C13.3126 18.4758 14.0217 19.1848 14.0217 20.0556Z"
            fill="url(#paint0_linear_1_126)"
          />
          <path
            d="M4.45761 9.56094C3.09805 9.56094 1.99181 10.6672 1.99181 12.0267C1.99181 13.3863 3.09805 14.4925 4.45761 14.4925C5.81718 14.4925 6.92341 13.3863 6.92341 12.0267C6.92341 10.6672 5.81718 9.56094 4.45761 9.56094ZM4.45761 13.6053C3.58688 13.6053 2.87782 12.8962 2.87782 12.0267C2.87782 11.1573 3.58688 10.447 4.45761 10.447C5.32834 10.447 6.0374 11.156 6.0374 12.0267C6.0374 12.8975 5.32834 13.6053 4.45761 13.6053Z"
            fill="url(#paint1_linear_1_126)"
          />
          <path
            d="M18.7114 6.43445C18.4593 6.43445 18.2098 6.45354 17.9641 6.48792C18.0036 6.22568 18.0278 5.95962 18.0278 5.69102C18.0278 2.64728 15.52 0.171295 12.4381 0.171295C9.35612 0.171295 6.84831 2.64728 6.84831 5.69102C6.84831 5.95835 6.8725 6.22186 6.90942 6.48282C6.67646 6.45227 6.44095 6.43572 6.20163 6.43572C3.15789 6.43572 0.681908 8.94226 0.681908 12.0242C0.681908 15.1061 3.15916 17.6139 6.20163 17.6139C6.43714 17.6139 6.67009 17.5986 6.89923 17.5694C6.86614 17.8125 6.84577 18.0595 6.84577 18.309C6.84577 21.3527 9.3523 23.8287 12.4355 23.8287C15.5187 23.8287 18.0252 21.3527 18.0252 18.309C18.0252 18.0557 18.0049 17.8061 17.9718 17.5605C18.2136 17.5936 18.4593 17.6139 18.7076 17.6139C21.7513 17.6139 24.2273 15.1061 24.2273 12.0242C24.2273 8.94226 21.75 6.43572 18.7076 6.43572L18.7114 6.43445ZM18.7114 16.7279C18.3842 16.7279 18.0647 16.6859 17.7515 16.6184C17.3582 15.4053 16.5549 14.3487 15.4258 13.6422C15.2208 13.5136 14.9459 13.5747 14.816 13.7835C14.6862 13.991 14.7498 14.2634 14.9573 14.3932C15.6906 14.8515 16.2596 15.488 16.6351 16.2225C15.9363 15.8661 15.3252 15.3353 14.872 14.6555C14.7345 14.4505 14.4583 14.3983 14.2572 14.532C14.0535 14.6682 13.9987 14.9432 14.1337 15.1469C14.8377 16.2034 15.8662 16.9596 17.031 17.3377C17.0998 17.6534 17.1418 17.9767 17.1418 18.309C17.1418 20.8639 15.0311 22.9427 12.4381 22.9427C9.84495 22.9427 7.73432 20.8639 7.73432 18.309C7.73432 17.9831 7.77633 17.6648 7.84253 17.353C9.07734 16.966 10.153 16.1551 10.8697 15.0106C10.9996 14.8031 10.9359 14.5307 10.7284 14.4009C10.5235 14.2723 10.2485 14.3334 10.1186 14.5422C9.64891 15.2945 8.99077 15.8725 8.23206 16.2467C8.5885 15.5415 9.12189 14.9241 9.80549 14.4683C10.0092 14.3321 10.0639 14.0572 9.92897 13.8535C9.79276 13.6498 9.51652 13.5951 9.31411 13.73C8.25752 14.434 7.50264 15.46 7.12455 16.6248C6.82413 16.6859 6.51733 16.7266 6.20418 16.7266C3.648 16.7266 1.57046 14.616 1.57046 12.0229C1.57046 9.42981 3.64927 7.31918 6.20418 7.31918C6.5237 7.31918 6.83558 7.35992 7.1411 7.42484C7.54083 8.61891 8.33772 9.65895 9.4516 10.3566C9.52543 10.4024 9.6069 10.424 9.6871 10.424C9.83477 10.424 9.97862 10.3502 10.0626 10.2165C10.1925 10.009 10.1288 9.73533 9.92261 9.60549C9.20209 9.15485 8.6407 8.53362 8.26389 7.81693C8.9704 8.17337 9.58908 8.70675 10.0448 9.39162C10.181 9.5953 10.456 9.64877 10.6597 9.51511C10.8634 9.37889 10.9181 9.10393 10.7819 8.90025C10.0715 7.83347 9.03278 7.07349 7.85398 6.70051C7.78015 6.37207 7.73432 6.036 7.73432 5.69102C7.73432 3.13611 9.84368 1.05858 12.4381 1.05858C15.0324 1.05858 17.1418 3.13738 17.1418 5.69102C17.1418 6.03855 17.0972 6.37971 17.0208 6.71196C15.8077 7.10532 14.7511 7.90858 14.0446 9.03773C13.9147 9.24396 13.9771 9.51765 14.1859 9.6475C14.3921 9.77734 14.6658 9.71497 14.7956 9.5062C15.2501 8.77931 15.879 8.2141 16.6046 7.83857C16.2481 8.50816 15.7275 9.09374 15.0706 9.53165C14.8669 9.66787 14.8122 9.94283 14.9471 10.1465C15.0833 10.3515 15.3596 10.4024 15.562 10.27C16.6008 9.57876 17.348 8.57436 17.7325 7.43503C18.0507 7.36628 18.3766 7.32173 18.7114 7.32173C21.2663 7.32173 23.3451 9.43236 23.3451 12.0255C23.3451 14.6186 21.2663 16.7292 18.7114 16.7292V16.7279Z"
            fill="url(#paint2_linear_1_126)"
          />
          <path
            d="M20.4579 9.55585C19.0984 9.55585 17.9921 10.6634 17.9921 12.0216C17.9921 13.3799 19.0984 14.4874 20.4579 14.4874C21.8175 14.4874 22.9237 13.3812 22.9237 12.0216C22.9237 10.6621 21.8175 9.55585 20.4579 9.55585ZM20.4579 13.6014C19.5872 13.6014 18.8781 12.8924 18.8781 12.0216C18.8781 11.1509 19.5872 10.4419 20.4579 10.4419C21.3287 10.4419 22.0377 11.1509 22.0377 12.0216C22.0377 12.8924 21.3287 13.6014 20.4579 13.6014Z"
            fill="url(#paint3_linear_1_126)"
          />
          <path
            d="M72.2068 15.345L72.0811 12.5791L78.6726 5.73615H81.2948L75.8169 11.5553L74.5237 12.9742L72.2068 15.345ZM70.1234 18.3084V5.73615H72.4583V18.3084H70.1234ZM78.8881 18.3084L74.0747 12.5791L75.6193 10.8728L81.6181 18.3084H78.8881Z"
            fill="#4476FF"
          />
          <path
            d="M80.8861 18.3084L86.5436 5.73615H88.8425L94.518 18.3084H92.0754L87.2081 6.97541H88.1421L83.2928 18.3084H80.8861ZM83.4903 15.3988L84.1189 13.5669H90.908L91.5366 15.3988H83.4903Z"
            fill="#4476FF"
          />
          <path
            d="M96.1169 18.3084V5.73615H98.4517V16.3328H105.025V18.3084H96.1169Z"
            fill="#4476FF"
          />
          <path
            d="M105.108 18.3084L110.766 5.73615H113.064L118.74 18.3084H116.297L111.43 6.97541H112.364L107.515 18.3084H105.108ZM107.712 15.3988L108.341 13.5669H115.13L115.759 15.3988H107.712Z"
            fill="#4476FF"
          />
          <path
            d="M29.1811 18.3084V5.73615H31.1028L36.5987 14.9139H35.5929L40.999 5.73615H42.9208L42.9387 18.3084H40.7296L40.7117 9.2025H41.1786L36.5808 16.8716H35.5391L30.8694 9.2025H31.4082V18.3084H29.1811Z"
            fill="black"
          />
          <path
            d="M48.4899 10.9626H54.7401V12.8844H48.4899V10.9626ZM48.6695 16.3507H55.7639V18.3084H46.3347V5.73615H55.5124V7.69383H48.6695V16.3507Z"
            fill="black"
          />
          <path
            d="M57.4148 18.3084V16.7459L65.5329 6.83173L65.8023 7.71179H57.5405V5.73615H67.9037V7.2987L59.7856 17.2128L59.4982 16.3328H68.1372V18.3084H57.4148Z"
            fill="black"
          />
          <defs>
            <linearGradient
              id="paint0_linear_1_126"
              x1="12.4419"
              y1="22.5213"
              x2="12.4419"
              y2="17.5898"
              gradientUnits="userSpaceOnUse"
            >
              <stop stop-color="#5571FF" />
              <stop offset="1" stop-color="#8261FF" />
            </linearGradient>
            <linearGradient
              id="paint1_linear_1_126"
              x1="4.45761"
              y1="14.4913"
              x2="4.45761"
              y2="9.56094"
              gradientUnits="userSpaceOnUse"
            >
              <stop stop-color="#B53EFF" />
              <stop offset="1" stop-color="#B53EFF" />
            </linearGradient>
            <linearGradient
              id="paint2_linear_1_126"
              x1="12.4571"
              y1="23.8287"
              x2="12.4571"
              y2="0.171295"
              gradientUnits="userSpaceOnUse"
            >
              <stop stop-color="#4077FF" />
              <stop offset="1" stop-color="#FF00FF" />
            </linearGradient>
            <linearGradient
              id="paint3_linear_1_126"
              x1="20.4579"
              y1="14.4874"
              x2="20.4579"
              y2="9.55585"
              gradientUnits="userSpaceOnUse"
            >
              <stop stop-color="#B53EFF" />
              <stop offset="1" stop-color="#B53EFF" />
            </linearGradient>
          </defs>
        </svg>
        <div class="relative w-20 h-20 mr-12">
          <svg
            class="absolute w-20 h-20 rounded-full"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 34 34"
          >
            <circle cx="17.2109" cy="17" r="16.5" fill="#E1E4FF" />
          </svg>
          <svg
            class="absolute w-10 h-10 text-purple-700 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
          >
            <path
              d="M10.2109 13.1429L6.28236 9.21429L7.38236 8.07501L9.42522 10.1179V3.71429H10.9966V10.1179L13.0395 8.07501L14.1395 9.21429L10.2109 13.1429ZM5.49665 16.2857C5.0645 16.2857 4.69443 16.1317 4.38643 15.8237C4.07843 15.5157 3.92469 15.1459 3.92522 14.7143V12.3572H5.49665V14.7143H14.9252V12.3572H16.4966V14.7143C16.4966 15.1464 16.3426 15.5165 16.0346 15.8245C15.7266 16.1325 15.3568 16.2862 14.9252 16.2857H5.49665Z"
              fill="#6779FE"
            />
          </svg>
        </div>
      </div>
      <div
        class="flex flex-col items-center py-96"
        style="background-color: #fafafa"
      >
        <div>
          <p class="text-center text-5xl leading-7 font-semibold">
            Welcome to Mezkala
          </p>
          <div class="flex w-full justify-center items-center">
            <button
              class="mt-10 py-6 px-24 rounded-full text-center text-white text-4xl font-semibold"
              style="
                background: linear-gradient(
                  91deg,
                  #ac59fc 2.11%,
                  #6779fe 98.56%
                );
              "
            >
              <a href="" id="appLink"> Open </a>
            </button>
          </div>
        </div>
        <div class="w-full mx-16 mt-16 px-8">
          <div style="background: #e9e8e8; height: 2px"></div>
        </div>
        <div class="flex flex-col items-center text-center w-full mt-16">
          <p class="text-4xl leading-7 font-medium">
            Don't have the app Mezkala yet?
          </p>
          <a
            href=""
            class="text-center text-4xl leading-7 mt-10 font-semibold"
            style="color: #6779fe"
            id="storelink"
          >
            Download
          </a>
        </div>
      </div>
      <div class="w-full h-screen" style="background-color: #6779fe">
        <div class="flex flex-col items-center pt-12">
          <button
            class="bg-white text-4xl font-semibold py-6 pr-20 pl-16 rounded-full text-center flex items-center justify-center"
            style="color: #6779fe"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="40"
              height="40"
              viewBox="0 0 20 20"
              fill="none"
              class="mr-2 align-middle"
            >
              <path
                d="M9.79384 13.1553L5.86527 9.22672L6.96527 8.08743L9.00812 10.1303V3.72672H10.5796V10.1303L12.6224 8.08743L13.7224 9.22672L9.79384 13.1553ZM5.07955 16.2981C4.64741 16.2981 4.27734 16.1441 3.96934 15.8361C3.66134 15.5281 3.5076 15.1583 3.50812 14.7267V12.3696H5.07955V14.7267H14.5081V12.3696H16.0796V14.7267C16.0796 15.1589 15.9256 15.5289 15.6176 15.8369C15.3096 16.1449 14.9397 16.2987 14.5081 16.2981H5.07955Z"
                fill="#6779FE"
              ></path>
            </svg>
            <span class="align-middle">Download</span>
          </button>
          <div class="w-full mx-16 mt-12 px-10">
            <div style="background: #fff; height: 3px"></div>
          </div>
          <div class="flex w-full justify-center space-x-12 mt-10">
            <div
              class="w-20 h-20 border border-white rounded-full border border-4"
            ></div>
            <div
              class="w-20 h-20 border border-white rounded-full border border-4"
            ></div>
            <div
              class="w-20 h-20 border border-white rounded-full border border-4"
            ></div>
          </div>
        </div>
      </div>
      <div class="pb-64"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-functions.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyB9vaAB9ptXhpeRs_JjxODEyuA_eO0tYu0",
        authDomain: "mezcalmos-31f1c.firebaseapp.com",
        databaseURL: "https://mezcalmos-31f1c-default-rtdb.firebaseio.com",
        projectId: "mezcalmos-31f1c",
        storageBucket: "mezcalmos-31f1c.appspot.com",
        messagingSenderId: "804036698204",
        appId: "1:804036698204:web:39b22436cbb4ef633f8699",
        measurementId: "G-5R20EL7CL9",
      };

      firebase.initializeApp(firebaseConfig);
      const functions = firebase.functions();

      async function callCloudFunction(os) {
        const callable = functions.httpsCallable("receiveIP");
        callable({ optionalParam: os })
          .then((result) => {
            console.log(result.data);
          })
          .catch((error) => {
            console.log("Error:", error);
          });
      }

      async function setLinks(osLinks) {
        document.getElementById("appLink").href = osLinks.appLink;
        document.getElementById("storelink").href = osLinks.storeLink;
        document.getElementById("links").style.display = "block";
        document.getElementById("message").style.display = "none";
        window.location.href = osLinks.appLink; // Replace with your actual Android deep link
        // setTimeout(function () {
        //   window.location.href = osLinks.storeLink;
        // }, 10000);
      }

      // async function redirect(links) {
      //   try {
      //     // Redirect user to the correct app store
      //     const userAgent =
      //       navigator.userAgent || navigator.vendor || window.opera;

      //     if (/android/i.test(userAgent) && links.android != null) {
      //       console.log("android");
      //       callCloudFunction("android");
      //       setLinks(links.android);
      //     } else if (
      //       /iPad|iPhone|iPod/.test(userAgent) &&
      //       !window.MSStream &&
      //       links.ios != null
      //     ) {
      //       console.log("ios");
      //       callCloudFunction("ios");
      //       setLinks(links.ios);
      //     } else {
      //       console.log("web");
      //       callCloudFunction("web");
      //       document.getElementById("message").innerText =
      //         "Not supported for this device";
      //     }
      //   } catch (error) {
      //     console.error("Error:", error);
      //     document.getElementById("message").innerText = "Unknown error";
      //   }
      // }

      async function redirect(links) {
        try {
          // Redirect user to the correct app store
          const userAgent =
            navigator.userAgent || navigator.vendor || window.opera;

          if (/android/i.test(userAgent) && links.android != null) {
            console.log("android");
            callCloudFunction("android");
            setLinks(links.android);
          } else if (
            /iPad|iPhone|iPod/.test(userAgent) &&
            !window.MSStream &&
            links.ios != null
          ) {
            console.log("ios");
            callCloudFunction("ios");
            setLinks(links.ios);
          } else {
            console.log("web or unsupported device");
            callCloudFunction("web");

            // Add your logic here for handling desktop browsers
            document.getElementById("message").innerText =
              "This is a desktop browser.";
          }
        } catch (error) {
          console.error("Error:", error);
          document.getElementById("message").innerText = "Unknown error";
        }
      }

      const deliveryAppLinks = {
        ios: null,
        android: {
          appLink: "mezdelivery://serviamigos",
          storeLink:
            "https://play.google.com/store/apps/details?id=com.mezcalmos.delivery",
        },
      };
      const customerAppLinks = {
        ios: {
          appLink: "mezkala://home",
          storeLink: "https://apps.apple.com/us/app/mezkala/id1595882320",
        },
        android: {
          appLink: "mezkala://home",
          storeLink:
            "https://play.google.com/store/apps/details?id=com.mezcalmos.customer",
        },
      };

      window.addEventListener("load", () => {
        console.log(window.location.pathname);
        console.log(window.location.pathname.split("/"));
        console.log(window.location.pathname.split("/").pop());
        if (window.location.pathname.split("/").pop() == "mandaditos") {
          console.log("delivery link");
          redirect(deliveryAppLinks);
        } else {
          console.log("customer link");
          redirect(customerAppLinks);
        }
      });
    </script>
  </body>
</html>
